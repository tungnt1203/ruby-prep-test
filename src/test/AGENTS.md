# AGENTS.md — Tests

<!-- generated by agents-md-generator | last_generated: 2026-02-12 -->

> Minitest tests for controllers, models, and integration testing.

## Structure

```
test/
├── controllers/                 # Controller integration tests
│   ├── exams_controller_test.rb
│   └── sessions_controller_test.rb
├── fixtures/                    # Test data fixtures
│   ├── exam_rooms.yml
│   ├── exam_sessions.yml
│   ├── questions.yml
│   └── users.yml
├── helpers/                     # Helper tests
├── integration/                 # Full integration tests
├── mailers/                     # Mailer tests
├── models/                      # Model unit tests
├── system/                      # System/browser tests
└── test_helper.rb              # Test configuration
```

## Naming Conventions

| Element | Pattern | Example |
|---------|---------|---------|
| Test file | `{class}_test.rb` | `exams_controller_test.rb` |
| Test class | `{Class}Test` | `ExamsControllerTest` |
| Test method | `test "{description}"` | `test "get index redirects without login"` |
| Fixtures | `{table_name}.yml` | `users.yml`, `exam_sessions.yml` |

## Rules

### Do

- Add `# frozen_string_literal: true` as first line
- Inherit from appropriate base class (`ActionDispatch::IntegrationTest`, `ActiveSupport::TestCase`)
- Use fixtures for test data
- One assertion concept per test
- Use descriptive test names that explain the scenario

### Don't

- Don't test implementation details — test behavior
- Don't use production data in tests
- Don't skip tests without good reason

## Patterns

### ✅ Good — Controller test with fixtures

```ruby
# frozen_string_literal: true

require "test_helper"

class ExamsControllerTest < ActionDispatch::IntegrationTest
  def exam_session
    exam_sessions(:one)
  end

  test "get index without login redirects to login" do
    get exams_path(exam_code: exam_session.hash_id)
    assert_redirected_to login_path
  end

  test "get index with login succeeds" do
    post login_path, params: { email: users(:one).email, password: "password" }
    get exams_path(exam_code: exam_session.hash_id)
    assert_response :success
  end
end
```

## Related Files

| File | Relationship |
|------|-------------|
| `AGENTS.md` (project root) | Global rules — read first |
| `app/controllers/AGENTS.md` | Controllers being tested |
| `app/models/AGENTS.md` | Models being tested |

## Checklist — New Test

Before creating a new test:

- [ ] File in correct directory (`test/controllers/`, `test/models/`, etc.)
- [ ] Named `{class}_test.rb`
- [ ] `# frozen_string_literal: true` as first line
- [ ] Inherits from appropriate base class
- [ ] Uses fixtures for test data
- [ ] Run `bin/rails test` to verify
